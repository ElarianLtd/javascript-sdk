<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>Elarian</title>
    <script>
        window.DEBUG = true;
    </script>
    <script src="../web.js"></script>
</head>
<body>
    <script>
        async function test() {
            const elarian = new Elarian({
                authToken: 'el_tkn_....',
                orgId: 'og-...',
                appId: '...',
            });
            elarian
                .on('closed', () => console.error('connection closed'))
                .on('error', (error) => {
                    console.error('Failed to connect: ', error);
                })
                .on('connected', async () => {

                    console.log('Connected!');
                    const customer = new elarian.Customer({
                        number: '+254718769882',
                        provider: 'cellular',
                    });
                    console.log('Getting customer state...');
                    const state = await customer.getState();
                    console.log(state);
                })
                .connect();
        };
        window.onload = (event) => {
            test().catch(console.error);
        };
    </script>
</body>
</html>